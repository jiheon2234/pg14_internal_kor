B-tree (btree 접근 방식으로 구현됨)은 루트에서 리프 노드까지 내려가며 필요한 요소를 빠르게 찾을 수 있도록 하는 데이터 구조이다. [^1]  검색 경로를 명확히 식별하기 위해, 트리의 모든 요소는 순서되로 정렬되어야 한다. B-tree는 값의 비교와 정렬이 가능한 순서형 데이터 유형에 맞춰 설계되었다.

아래 다이어그램은 공항 코드에 대해 인덱스가 구축된 B-tree의 개별적인 다이어그램이다; 내부 노드는 가로 직사각형으로, 리프 노드는 세로로 정렬되어 있다.

![](_static/CleanShot%20-000091.png)

각 노드는 여러 요소를 포함하며, 각 요소는 인덱스 키와 포인터로 구성된다. 내부 노드의 요소는 다음 레벨의 노드를 참조하고, 리프 노드의 요소는 힙 튜플을 참조한다(참조는 다이어그램에 표시되지 않음).

B-tree의 중요한 속성 :
- 균형 잡힌 구조로, 트리의 모든 리프 노드가 동일한 깊이에 위치한다. 따라서, 모든 값에 대해 동일한 검색 시간을 보장한다.
- 많은 가지를 가지며, 각 노드는 보통 수백개의 요소를 포함한다(다이어그램에서는 3개만 표시).
결과적으로, B-tree의 깊이는 큰 테이블에서도 항상 작다.
> 'B'가 무었을 의미하는지 확실히 말할 순 없다. balanced나 bushy 둘 다 적절하다. 놀랍게도, B를 binary로 해석하는 경우도 종종 볼 수 있는데, 이는 분명히 잘못됬다.

- 인덱스의  데이터는 각 노드 내부와 동일 레벨의 모든 노드에서 오름차순 또는 내림차순으로 정렬된다. 동일한 레벨의 노드들은 양방향 리스트로 연결되어 있어, 루트부터 시작하지 않아도 리스트를 한 방향으로 스캔하여 정렬된 집합을 얻을 수 있다.







[^1]:https://postgresql.org/docs/14/btree.html
[backend/access/nbtree/README](https://git.postgresql.org/gitweb/?p=postgresql.git;a=blob;f=src/backend/access/nbtree/README;hb=REL_14_STABLE)